@(message: String, response: String)

@main(message) {
    @*<div ng-view></div>*@
    <script>
        $(function ()
        { $(".comment").popover();
        });
    </script>

    <div ng-controller="MyController" ng-init="data=@response;">

        <h4><a href="/reports/{{data.0.certname}}">{{data.0.certname}}</a> {{(data| filter:filterNotSchedule).length}} events</h4>

        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Title</th>
                    <th>Message</th>
                    <th>Rsc Type</th>
                    <th>Property</th>
                </tr>
            </thead>
            <tbody>

                <tr ng-repeat="event in data | filter:filterNotSchedule">
                    <td style="width:10%;">{{event.timestamp | moment}}</td>
                    <td><span class="badge badge-{{event.status | status }}">{{event.status}}</span></td>
                    <td>{{event['resource-title']}}</td>
                    <td>{{event.message}}</td>
                    <td style="width:5%;">{{event['resource-type']}}</td>
                    <td>{{event.property}}</td>
                    <td> <button type="button" class="btn btn-info" ng-click="displayParams(event)"> <i class="icon-comment"></i> </button>
                    </td>
                </tr>

            </tbody>
        </table>

        <pre>{{data | json}}</pre>
    </div>

}